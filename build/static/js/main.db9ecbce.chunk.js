(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(17),a=n.n(c),o=n(8),u=n(3),r=n(2),i=n(4),s=n.n(i),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},b=function(e){return s.a.post(l,e).then((function(e){return e.data}))},h=function(e,t){return s.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},j=(n(40),n(0)),m=function(e){var t=e.inputFields,n=e.submitAction;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsxs)("form",{onSubmit:n,children:[t.map((function(e){return Object(j.jsxs)("div",{children:[e.title," : ",Object(j.jsx)("input",{value:e.value,onChange:e.onChange})]},e.id)})),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})]})},p=function(e){var t=e.onChange,n=e.value;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Filter the Contacts by Name"}),Object(j.jsx)("input",{value:n,onChange:t})]})},v=function(e){var t=e.persons,n=e.deletePerson;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsxs)("li",{children:[e.name," : ",e.number," ",Object(j.jsx)("button",{onClick:function(){return n(e.id)},children:"Remove"})]},e.id)}))})]})},O=function(e){var t=e.notification;return null===t.message?null:Object(j.jsx)("div",{className:t.type,children:t.message})},x=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(u.a)(a,2),s=i[0],l=i[1],x=Object(r.useState)(""),g=Object(u.a)(x,2),y=g[0],C=g[1],w=Object(r.useState)(""),T=Object(u.a)(w,2),k=T[0],S=T[1],N=Object(r.useState)({message:null,type:"success",duration:3}),D=Object(u.a)(N,2),F=D[0],P=D[1];Object(r.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var A=[{id:0,title:"Name",onChange:function(e){l(e.target.value)},value:s},{id:1,title:"Number",onChange:function(e){C(e.target.value)},value:y}],E=""===k?n:n.filter((function(e){return-1!==e.name.toUpperCase().indexOf(k.toUpperCase())}));return Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{notification:F}),Object(j.jsx)(m,{inputFields:A,submitAction:function(e){e.preventDefault();var t=n.find((function(e){return e.name===s}));if(t&&t.number===y)alert("The contact ".concat(s," with the number ").concat(y," does already exist in the phonebook."));else{if(n.find((function(e){return e.name===s}))&&""!==y)return!0===window.confirm("The contact ".concat(s," is already present with the number ").concat(t.number,". Do you want to update the number ?"))?void function(e,t){var a=Object(o.a)(Object(o.a)({},e),{},{number:t});h(a.id,a).then((function(e){c(n.map((function(t){return t.id!==a.id?t:e})));var t={message:"The contact information for ".concat(e.name," has been updated."),type:"success"};P(t),setTimeout((function(){return P({message:null,type:null})}),3e3),l(""),C("")})).catch((function(t){var a={message:"The contact ".concat(e.name," has already been deleted from the server."),type:"error"};P(a),setTimeout((function(){return P({message:null,type:null})}),3e3),c(n.filter((function(t){return t.id!==e.id})))}))}(t,y):void 0;if(""!==s&&""!==y)b({name:s,number:y}).then((function(e){c(n.concat(e)),l(""),C("");var t={message:"The contact ".concat(e.name," has been added to the phonebook."),type:"success"};P(t),setTimeout((function(){return P({message:null,type:null})}),3e3)}))}}}),Object(j.jsx)(p,{value:k,onChange:function(e){S(e.target.value)}}),Object(j.jsx)(v,{persons:E,deletePerson:function(e){var t=n.find((function(t){return t.id===e}));!0===window.confirm("Do you really want to delete the Contact ".concat(t.name," ?"))&&f(e).then((function(a){var o={message:"The contact ".concat(t.name," has been deleted from the phonebook."),type:"success"};P(o),setTimeout((function(){return P({message:null,type:null})}),3e3),c(n.filter((function(t){return t.id!==e})))}))}})]})};a.a.render(Object(j.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.db9ecbce.chunk.js.map